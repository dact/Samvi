<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Validacion de usuarios</title>
        <!--<script type="text/javascript" src="js/lib/phonegap/cordova.js"></script>-->
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>

        <link rel="stylesheet" href="css/jquery.mobile-1.3.2.min.css" />
        <script src="js/lib/jquery/jquery-1.10.2.min.js"></script>
        <script src="js/lib/jquerymobile/jquery.mobile-1.3.2.min.js"></script>
    </head>

    <body>

        <div data-role="page" id="inicio">

            <div data-role="header">
                <h1>SAMVI</h1>
            </div>
            <div data-role="content">
                <img border="0" src="img/logo.png" alt="Logo, Samvi" style="position: relative; left: 50%; margin-top: 5px;margin-left: -85px;"/>
                <h4 style="text-align: center">Servicio de Asistencia Mecánica Vial</h4>

                <form id="formulario">
                    <label> Usuario </label>
                    <input type="text" id="nombredeusuario" name="nombredeusuario">
                    <label>Constraseña</label>
                    <input type="password" id="clave" name="clave" >

                    <input type="submit" value="Entrar" id="botonregistrar">
                </form>
                <p>
                    <a id="registrarse" class="ui-link" href="frmregistro.html">Registrarse</a>
                    <a id="vermapa" class="ui-link" href="mapasamvi.html">Ver mapa</a>
                    <a id="peticion" class="ui-link" href="frmpeticion.html">Ver mapa</a>
                </p>

            </div>
        </div>
        
        <div data-role="page" id="home">

            <div data-role="header">
                <h1>Bienvenido</h1>
            </div>

            <div data-role="content">	
                <h2> Bienvenido a la aplicacion </h2>
                <h3> Su usuario y password son válidos</h3>
            </div>

        </div>

 
        <script>

            $('#formulario').submit(function() {
                // recolecta los valores que inserto el usuario
                var datosUsuario = $("#nombredeusuario").val()
                var datosPassword = $("#clave").val()
                archivoValidacion = "http://revolucion.mobi/ejemplos/phonegap/envioFormulario/validacion_de_datos.php?jsoncallback=?"

                $.getJSON(archivoValidacion, {usuario: datosUsuario, password: datosPassword})
                        .done(function(respuestaServer) {
                    alert(respuestaServer.mensaje + "\nGenerado en: " + respuestaServer.hora + "\n" + respuestaServer.generador)
                    if (respuestaServer.validacion == "ok") {
                        /// si la validacion es correcta, muestra la pantalla "home"
                       // $.mobile.changePage("#home")
                    } else {
                        /// ejecutar una conducta cuando la validacion falla
                    }
                })
                return false;
            })
        </script>

    </body>
</html>
